        
        .runner-marker {
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLSP Run & Rise Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0EA5E9, #10B981, #F59E0B, #EF4444);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            backdrop-filter: blur(10px);
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            margin-bottom: 20px;
        }
        
        .main-title {
            font-size: 2.8em;
            font-weight: bold;
            background: linear-gradient(45deg, #0EA5E9, #10B981, #F59E0B, #EF4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            color: #10B981;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .slogan {
            font-size: 1em;
            color: #1E40AF;
            font-style: italic;
        }
        
        .attribution {
            font-size: 0.9em;
            color: #8B5CF6;
            margin-top: 5px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        .stat-card {
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card.start {
            background: linear-gradient(135deg, #0EA5E9, #0284C7);
        }
        
        .stat-card.love {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        
        .stat-card.support {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }
        
        .stat-card.purpose {
            background: linear-gradient(135deg, #EF4444, #DC2626);
        }
        
        .stat-icon {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .stat-number {
            font-size: 3em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .stat-label {
            opacity: 0.9;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        
        .stat-subtitle {
            opacity: 0.7;
            font-size: 0.9em;
        }
        
        .erste-route-section {
            background: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .route-title {
            text-align: center;
            font-size: 2em;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #0EA5E9, #10B981, #F59E0B);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .route-subtitle {
            text-align: center;
            color: #6B7280;
            margin-bottom: 30px;
            font-size: 1.1em;
        }
        
        .route-map-container {
            background: #F9FAFB;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            position: relative;
        }
        
        .route-map {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            height: 500px;
        }
        
        .map-city {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .map-city:hover {
            transform: scale(1.2);
        }
        
        .map-city.completed {
            fill: #10B981;
        }
        
        .map-city.current {
            fill: #F59E0B;
            animation: mapPulse 2s infinite;
        }
        
        .map-city.locked {
            fill: #9CA3AF;
        }
        
        @keyframes mapPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .route-line {
            fill: none;
            stroke: #E5E7EB;
            stroke-width: 4;
            stroke-dasharray: 10;
        }
        
        .route-line-completed {
            stroke: #10B981;
            stroke-width: 5;
            stroke-dasharray: 0;
        }
        
        .route-line-current {
            stroke: #F59E0B;
            stroke-width: 5;
            stroke-dasharray: 10;
            animation: dash 1s linear infinite;
        }
        
        @keyframes dash {
            to { stroke-dashoffset: -20; }
        }
        
        .city-info-popup {
            position: absolute;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 350px;
            z-index: 100;
            display: none;
            border: 3px solid #0EA5E9;
        }
        
        .city-info-popup.show {
            display: block;
        }
        
        .city-info-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #1F2937;
        }
        
        .city-info-section {
            margin-bottom: 12px;
        }
        
        .city-info-label {
            font-weight: 600;
            color: #0EA5E9;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        .city-info-text {
            color: #4B5563;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .route-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
            text-align: center;
        }
        
        .route-stat {
            background: #F9FAFB;
            padding: 20px;
            border-radius: 12px;
        }
        
        .route-stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #0EA5E9;
        }
        
        .route-stat-label {
            color: #6B7280;
            font-size: 0.9em;
            margin-top: 5px;
        }
        
        .cities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .city-card {
            background: #F9FAFB;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
        }
        
        .city-card.completed {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border-color: #10B981;
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .city-card.current {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            border-color: #F59E0B;
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .city-card.locked {
            opacity: 0.5;
        }
        
        .city-flag {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .city-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        
        .city-distance {
            font-size: 0.85em;
            opacity: 0.8;
        }
        
        .city-status {
            margin-top: 10px;
            font-size: 1.2em;
        }
        
        .current-location {
            background: #FEF3C7;
            border: 2px solid #F59E0B;
            padding: 20px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: center;
        }
        
        .current-location-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #92400E;
            margin-bottom: 10px;
        }
        
        .current-location-text {
            color: #78350F;
            font-size: 1.1em;
        }
        
        .next-checkpoint {
            background: #DBEAFE;
            border: 2px solid #0EA5E9;
            padding: 15px;
            border-radius: 12px;
            margin-top: 15px;
        }
        
        .next-checkpoint-title {
            font-weight: bold;
            color: #075985;
            margin-bottom: 5px;
        }
        
        .next-checkpoint-km {
            color: #0369A1;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        .charity-section {
            background: linear-gradient(135deg, #1E40AF, #1E3A8A);
            color: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 15px 40px rgba(30, 64, 175, 0.3);
        }
        
        .charity-title {
            text-align: center;
            font-size: 2em;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .charity-projects {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }
        
        .charity-project {
            background: rgba(255, 255, 255, 0.15);
            padding: 25px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .project-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .project-amount {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .progress-bar {
            background: rgba(255, 255, 255, 0.3);
            height: 12px;
            border-radius: 6px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            background: white;
            height: 100%;
            border-radius: 6px;
            transition: width 1s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .completed {
            background: rgba(16, 185, 129, 0.9);
            color: white;
        }
        
        .in-progress {
            background: rgba(245, 158, 11, 0.9);
            color: white;
        }
        
        .admin-panel {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border: 2px dashed #dee2e6;
        }
        
        .admin-toggle {
            background: #6B7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        
        .admin-toggle:hover {
            background: #4B5563;
        }
        
        .admin-form {
            display: none;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            align-items: end;
        }
        
        .admin-form.active {
            display: grid;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group label {
            margin-bottom: 5px;
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }
        
        .form-group input {
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 6px;
            font-size: 14px;
        }
        
        .update-btn {
            background: #10B981;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .update-btn:hover {
            background: #059669;
        }
        
        .last-updated {
            text-align: center;
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 20px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.2em;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .charity-projects {
                grid-template-columns: 1fr;
            }
            
            .admin-form {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">üèÉ‚Äç‚ôÇÔ∏è</div>
            <h1 class="main-title">SLSP Run & Rise</h1>
            <p class="subtitle">Start. Love. Support. Purpose.</p>
            <p class="slogan">"Zaƒçni s nami a be≈æ za bud√∫cnos≈•"</p>
            <p class="attribution">Iniciat√≠va Women's Voices</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card start">
                <div class="stat-icon">‚ñ∂Ô∏è</div>
                <div class="stat-number" id="totalRunners">0</div>
                <div class="stat-label">START</div>
                <div class="stat-subtitle">Akt√≠vnych be≈æcov</div>
            </div>
            
            <div class="stat-card love">
                <div class="stat-icon">‚ù§Ô∏è</div>
                <div class="stat-number" id="totalKm">0</div>
                <div class="stat-label">LOVE</div>
                <div class="stat-subtitle">Nabehan√© kilometre</div>
            </div>
            
            <div class="stat-card support">
                <div class="stat-icon">ü§ù</div>
                <div class="stat-number" id="totalEuro">0‚Ç¨</div>
                <div class="stat-label">SUPPORT</div>
                <div class="stat-subtitle">Pre dobr√∫ vec</div>
            </div>
            
            <div class="stat-card purpose">
                <div class="stat-icon">üéØ</div>
                <div class="stat-number" id="projectsCompleted">0</div>
                <div class="stat-label">PURPOSE</div>
                <div class="stat-subtitle">Dokonƒçen√Ωch projektov</div>
            </div>
        </div>
        
        <div class="erste-route-section">
            <h2 class="route-title">üó∫Ô∏è Erste Group Journey</h2>
            <p class="route-subtitle">Bratislava ‚Üí Budape≈°≈• ‚Üí Bukure≈°≈• ‚Üí Belehrad ‚Üí Z√°hreb ‚Üí Viede≈à ‚Üí Praha ‚Üí Ko≈°ice ‚Üí Bratislava</p>
            
            <div class="route-map-container">
                <div id="cityInfoPopup" class="city-info-popup"></div>
                
                <svg class="route-map" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
                    <!-- Background -->
                    <rect width="900" height="600" fill="#F0F9FF"/>
                    
                    <!-- Simplified country shapes - arranged like real map -->
                    <!-- Czechia (top left) -->
                    <path d="M 280 170 L 380 160 L 390 230 L 340 250 L 290 230 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="335" y="210" font-size="15" font-weight="700" fill="#1E40AF">ƒåESKO</text>
                    
                    <!-- Austria (left center) -->
                    <path d="M 290 250 L 390 250 L 390 310 L 280 310 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="315" y="285" font-size="15" font-weight="700" fill="#1E40AF">RAK√öSKO</text>
                    
                    <!-- Slovakia (center) -->
                    <path d="M 340 250 L 550 240 L 550 290 L 390 290 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="430" y="270" font-size="15" font-weight="700" fill="#1E40AF">SLOVENSKO</text>
                    
                    <!-- Hungary (center-south) -->
                    <path d="M 390 290 L 550 290 L 550 360 L 390 350 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="445" y="325" font-size="15" font-weight="700" fill="#1E40AF">MAƒéARSKO</text>
                    
                    <!-- Croatia (bottom left) -->
                    <path d="M 320 350 L 420 360 L 420 440 L 310 440 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="340" y="400" font-size="15" font-weight="700" fill="#1E40AF">CHORV√ÅTSKO</text>
                    
                    <!-- Serbia (bottom center) -->
                    <path d="M 420 370 L 540 370 L 540 460 L 420 460 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="455" y="420" font-size="15" font-weight="700" fill="#1E40AF">SRBSKO</text>
                    
                    <!-- Romania (right) -->
                    <path d="M 540 310 L 720 310 L 720 480 L 540 480 Z" fill="#BFDBFE" stroke="#3B82F6" stroke-width="2" opacity="0.7"/>
                    <text x="600" y="400" font-size="15" font-weight="700" fill="#1E40AF">RUMUNSKO</text>
                    
                    <!-- Route lines (will be dynamically added) -->
                    <g id="routeLines"></g>
                    
                    <!-- Cities (will be dynamically added) -->
                    <g id="routeCities"></g>
                    
                    <!-- Runner marker -->
                    <g id="runnerMarker" class="runner-marker" style="display: none;">
                        <circle cx="0" cy="0" r="15" fill="#F59E0B" stroke="white" stroke-width="3"/>
                        <text x="0" y="6" text-anchor="middle" font-size="20">üèÉ‚Äç‚ôÇÔ∏è</text>
                    </g>
                </svg>
            </div>
            
            <div class="route-stats">
                <div class="route-stat">
                    <div class="route-stat-number" id="routeKm">0</div>
                    <div class="route-stat-label">Nabehan√© km</div>
                </div>
                <div class="route-stat">
                    <div class="route-stat-number" id="routePercent">0%</div>
                    <div class="route-stat-label">Cesty dokonƒçen√©</div>
                </div>
                <div class="route-stat">
                    <div class="route-stat-number" id="routeCities">0/7</div>
                    <div class="route-stat-label">Nav≈°t√≠ven√© mest√°</div>
                </div>
            </div>
            
            <div class="current-location" id="currentLocation">
                <div class="current-location-title">üìç Aktu√°lna poz√≠cia</div>
                <div class="current-location-text" id="currentLocationText">≈†tart v Bratislave</div>
                
                <div class="next-checkpoint" id="nextCheckpoint">
                    <div class="next-checkpoint-title">ƒéal≈°√≠ checkpoint:</div>
                    <div class="next-checkpoint-km" id="nextCheckpointText">Viede≈à - 80 km</div>
                </div>
            </div>
            
            <div class="cities-grid" id="citiesGrid">
                <!-- Cities will be loaded here -->
            </div>
        </div>
        
        <div class="charity-section">
            <h2 class="charity-title">üéØ Charitat√≠vne projekty, ktor√© podporujeme</h2>
            <div class="charity-projects" id="charityProjects">
                <!-- Projekty sa vlo≈æia dynamicky -->
            </div>
        </div>
        
        <!-- Admin panel -->
        <div class="admin-panel">
            <button class="admin-toggle" onclick="toggleAdmin()">‚öôÔ∏è Aktualizova≈• √∫daje</button>
            
            <div class="admin-form" id="adminForm">
                <div class="form-group">
                    <label>Poƒçet be≈æcov</label>
                    <input type="number" id="inputRunners" min="0">
                </div>
                
                <div class="form-group">
                    <label>Celkov√© km</label>
                    <input type="number" id="inputKm" step="0.1" min="0">
                </div>
                
                <div class="form-group">
                    <label>Projekt 1 (‚Ç¨)</label>
                    <input type="number" id="inputProject1" min="0">
                </div>
                
                <div class="form-group">
                    <label>Projekt 2 (‚Ç¨)</label>
                    <input type="number" id="inputProject2" min="0">
                </div>
                
                <div class="form-group">
                    <label>Projekt 3 (‚Ç¨)</label>
                    <input type="number" id="inputProject3" min="0">
                </div>
                
                <div class="form-group">
                    <button class="update-btn" onclick="updateData()">Aktualizova≈•</button>
                </div>
            </div>
        </div>
        
        <div class="last-updated" id="lastUpdated">
            Posledn√° aktualiz√°cia: Nikdy
        </div>
    </div>

    <script>
        // Erste Group Route - podƒæa re√°lnej mapy
        const ersteRoute = [
            { 
                city: "Bratislava", 
                country: "Slovensko", 
                flag: "üá∏üá∞", 
                km: 0, 
                x: 380, 
                y: 270,
                runFact: "Bratislavsk√Ω marat√≥n je najstar≈°√≠ na Slovensku (od 2006)",
                ersteFact: "Slovensk√° sporiteƒæ≈àa je s√∫ƒças≈•ou Erste Group od roku 2001"
            },
            { 
                city: "Budape≈°≈•", 
                country: "Maƒèarsko", 
                flag: "üá≠üá∫", 
                km: 200, 
                x: 440, 
                y: 310,
                runFact: "Budape≈°tianksy marat√≥n vedie popri Dunaji s v√Ωhƒæadom na parlament",
                ersteFact: "Erste Bank Hungary p√¥sob√≠ v krajine od roku 1997"
            },
            { 
                city: "Bukure≈°≈•", 
                country: "Rumunsko", 
                flag: "üá∑üá¥", 
                km: 1040, 
                x: 610, 
                y: 400,
                runFact: "Bukure≈°≈•sk√Ω polmarat√≥n je jeden z najr√Ωchlej≈°ie rast√∫cich behov v regi√≥ne",
                ersteFact: "Banca ComercialƒÉ Rom√¢nƒÉ je najv√§ƒç≈°ia banka v Rumunsku"
            },
            { 
                city: "Belehrad", 
                country: "Srbsko", 
                flag: "üá∑üá∏", 
                km: 1670, 
                x: 480, 
                y: 410,
                runFact: "Belehradsk√Ω marat√≥n prech√°dza cez historick√© pevnosti",
                ersteFact: "Erste Bank Serbia podporuje digit√°lne bankovn√≠ctvo od roku 2005"
            },
            { 
                city: "Z√°hreb", 
                country: "Chorv√°tsko", 
                flag: "üá≠üá∑", 
                km: 2070, 
                x: 370, 
                y: 390,
                runFact: "Z√°hrebsk√Ω marat√≥n vedie cez malebn√© parky a historick√© centrum",
                ersteFact: "Erste&Steierm√§rkische Bank p√¥sob√≠ v Chorv√°tsku od roku 2003"
            },
            { 
                city: "Viede≈à", 
                country: "Rak√∫sko", 
                flag: "üá¶üáπ", 
                km: 2450, 
                x: 340, 
                y: 290,
                runFact: "Viedensk√Ω mestsk√Ω marat√≥n je jeden z najr√Ωchlej≈°√≠ch v Eur√≥pe",
                ersteFact: "Erste Group m√° s√≠dlo vo Viedni a p√¥sob√≠ od roku 1819"
            },
            { 
                city: "Praha", 
                country: "ƒåesko", 
                flag: "üá®üáø", 
                km: 2780, 
                x: 330, 
                y: 210,
                runFact: "Pra≈æsk√Ω marat√≥n je pova≈æovan√Ω za jeden z najkraj≈°√≠ch v Eur√≥pe",
                ersteFact: "ƒåesk√° spo≈ôitelna je l√≠drom digit√°lneho bankovn√≠ctva v ƒåR"
            },
            { 
                city: "Ko≈°ice", 
                country: "Slovensko", 
                flag: "üá∏üá∞", 
                km: 3210, 
                x: 510, 
                y: 260,
                runFact: "Ko≈°ick√Ω Medzin√°rodn√Ω marat√≥n mieru je najstar≈°√≠ v Eur√≥pe (od 1924)",
                ersteFact: "V√Ωchodoslovensk√° poboƒçkov√° s√≠≈• patr√≠ medzi najsilnej≈°ie v SK"
            },
            { 
                city: "Bratislava", 
                country: "Slovensko", 
                flag: "üá∏üá∞", 
                km: 3610, 
                x: 380, 
                y: 270,
                runFact: "Dokonƒçili sme okruh! üéâ Brav√≥!",
                ersteFact: "Sp√§≈• v centr√°le Slovenskej sporiteƒæne"
            }
        ];
        
        const totalRouteKm = 3610;
        
        // Charitat√≠vne projekty
        const charityProjects = [
            { 
                name: "Pomoc pre rodinu s ≈•a≈æko chor√Ωm die≈•a≈•om", 
                target: 2000, 
                description: "Podpora s n√°kladmi na lieƒçbu a rehabilit√°ciu"
            },
            { 
                name: "Obnova detsk√©ho ihriska v obci", 
                target: 1500, 
                description: "Moderniz√°cia a bezpeƒçnos≈• ihriska pre miestne deti"
            },
            { 
                name: "Podpora seniorov v domove d√¥chodcov", 
                target: 800, 
                description: "Vybavenie pre aktivity a kvalitu ≈æivota seniorov"
            }
        ];
        
        // Naƒç√≠tanie ulo≈æen√Ωch d√°t
        let data = JSON.parse(localStorage.getItem('slspRunRiseData') || JSON.stringify({
            runners: 0,
            kilometers: 0,
            project1: 0,
            project2: 0,
            project3: 0,
            lastUpdated: null
        }));
        
        // Inicializ√°cia
        document.addEventListener('DOMContentLoaded', function() {
            updateDisplay();
            loadFormData();
            updateErsteRoute();
        });
        
        function toggleAdmin() {
            const form = document.getElementById('adminForm');
            form.classList.toggle('active');
        }
        
        function loadFormData() {
            document.getElementById('inputRunners').value = data.runners;
            document.getElementById('inputKm').value = data.kilometers;
            document.getElementById('inputProject1').value = data.project1;
            document.getElementById('inputProject2').value = data.project2;
            document.getElementById('inputProject3').value = data.project3;
        }
        
        function updateData() {
            // Z√≠skanie nov√Ωch hodn√¥t
            data.runners = parseInt(document.getElementById('inputRunners').value) || 0;
            data.kilometers = parseFloat(document.getElementById('inputKm').value) || 0;
            data.project1 = parseInt(document.getElementById('inputProject1').value) || 0;
            data.project2 = parseInt(document.getElementById('inputProject2').value) || 0;
            data.project3 = parseInt(document.getElementById('inputProject3').value) || 0;
            data.lastUpdated = new Date().toISOString();
            
            // Ulo≈æenie
            localStorage.setItem('slspRunRiseData', JSON.stringify(data));
            
            // Aktualiz√°cia zobrazenia
            updateDisplay();
            
            // Aktualiz√°cia Erste Route
            updateErsteRoute();
            
            // Skrytie admin panelu
            document.getElementById('adminForm').classList.remove('active');
            
            alert('‚úÖ √ödaje boli √∫spe≈°ne aktualizovan√©!');
        }
        
        function updateDisplay() {
            // Aktualiz√°cia hlavn√Ωch ≈°tatist√≠k
            document.getElementById('totalRunners').textContent = data.runners;
            document.getElementById('totalKm').textContent = data.kilometers.toFixed(1);
            
            const totalEuro = Math.floor(data.kilometers);
            document.getElementById('totalEuro').textContent = totalEuro + '‚Ç¨';
            
            // Poƒçet dokonƒçen√Ωch projektov
            const projectAllocations = [data.project1, data.project2, data.project3];
            const completedProjects = projectAllocations.filter((amount, index) => 
                amount >= charityProjects[index].target
            ).length;
            document.getElementById('projectsCompleted').textContent = completedProjects;
            
            // Aktualiz√°cia charitat√≠vnych projektov
            updateCharityProjects();
            
            // Posledn√° aktualiz√°cia
            const lastUpdatedElement = document.getElementById('lastUpdated');
            if (data.lastUpdated) {
                const date = new Date(data.lastUpdated);
                lastUpdatedElement.textContent = `Posledn√° aktualiz√°cia: ${date.toLocaleDateString('sk-SK')} o ${date.toLocaleTimeString('sk-SK')}`;
            }
        }
        
        function updateErsteRoute() {
            const currentKm = data.kilometers;
            const progressPercent = Math.min((currentKm / totalRouteKm) * 100, 100);
            
            // Update stats
            document.getElementById('routeKm').textContent = currentKm.toFixed(1) + ' km';
            document.getElementById('routePercent').textContent = progressPercent.toFixed(1) + '%';
            
            // Find current position
            let currentCityIndex = 0;
            let visitedCities = 0;
            
            for (let i = 0; i < ersteRoute.length; i++) {
                if (currentKm >= ersteRoute[i].km) {
                    currentCityIndex = i;
                    if (i < ersteRoute.length - 1) visitedCities = i + 1;
                    else visitedCities = 8; // 8 unique cities (Ko≈°ice, Budape≈°≈• 2x, others)
                }
            }
            
            document.getElementById('routeCities').textContent = Math.min(visitedCities, 8) + '/8';
            
            // Update map
            updateMap(currentKm, currentCityIndex);
            
            // Update current location text
            const currentCity = ersteRoute[currentCityIndex];
            const nextCity = ersteRoute[currentCityIndex + 1];
            
            if (currentKm >= totalRouteKm) {
                document.getElementById('currentLocationText').textContent = 'üéâ Okruh dokonƒçen√Ω! Gratulujeme!';
                document.getElementById('nextCheckpoint').style.display = 'none';
            } else if (currentKm === currentCity.km) {
                document.getElementById('currentLocationText').textContent = `${currentCity.flag} ${currentCity.city}`;
                document.getElementById('nextCheckpoint').innerHTML = `
                    <div class="next-checkpoint-title">ƒéal≈°√≠ checkpoint:</div>
                    <div class="next-checkpoint-km">${nextCity.flag} ${nextCity.city} - ${nextCity.km - currentKm} km</div>
                `;
            } else {
                const kmToNext = nextCity.km - currentKm;
                document.getElementById('currentLocationText').textContent = 
                    `Na ceste medzi ${currentCity.flag} ${currentCity.city} a ${nextCity.flag} ${nextCity.city}`;
                document.getElementById('nextCheckpoint').innerHTML = `
                    <div class="next-checkpoint-title">ƒéal≈°√≠ checkpoint:</div>
                    <div class="next-checkpoint-km">${nextCity.flag} ${nextCity.city} - e≈°te ${kmToNext.toFixed(1)} km</div>
                `;
            }
            
            // Update cities grid
            const uniqueCities = ersteRoute.slice(0, -1); // Exclude duplicate Bratislava at end
            
            const citiesGrid = document.getElementById('citiesGrid');
            citiesGrid.innerHTML = uniqueCities.map((city, index) => {
                let status = 'locked';
                let statusIcon = 'üîí';
                
                if (currentKm >= city.km) {
                    status = 'completed';
                    statusIcon = '‚úÖ';
                } else {
                    const nextTarget = ersteRoute.find(c => c.km > currentKm);
                    if (nextTarget && nextTarget.city === city.city && nextTarget.km === city.km) {
                        status = 'current';
                        statusIcon = 'üéØ';
                    }
                }
                
                return `
                    <div class="city-card ${status}" onclick="showCityInfo(${index})">
                        <div class="city-flag">${city.flag}</div>
                        <div class="city-name">${city.city}</div>
                        <div class="city-distance">${city.km} km</div>
                        <div class="city-status">${statusIcon}</div>
                    </div>
                `;
            }).join('');
        }
        
        function showCityInfo(index) {
            const city = ersteRoute[index];
            const popup = document.getElementById('cityInfoPopup');
            
            popup.innerHTML = `
                <div class="city-info-title">${city.flag} ${city.city}, ${city.country}</div>
                <div class="city-info-section">
                    <div class="city-info-label">üèÉ‚Äç‚ôÇÔ∏è Be≈æeck√Ω fakt:</div>
                    <div class="city-info-text">${city.runFact}</div>
                </div>
                <div class="city-info-section">
                    <div class="city-info-label">üè¶ Erste Bank fakt:</div>
                    <div class="city-info-text">${city.ersteFact}</div>
                </div>
                <div class="city-info-section">
                    <div class="city-info-label">üìç Vzdialenos≈• od ≈°tartu:</div>
                    <div class="city-info-text">${city.km} km</div>
                </div>
            `;
            
            popup.classList.add('show');
            
            // Hide after 8 seconds
            setTimeout(() => {
                popup.classList.remove('show');
            }, 8000);
        }
        
        function updateMap(currentKm, currentCityIndex) {
            const routeLines = document.getElementById('routeLines');
            const routeCities = document.getElementById('routeCities');
            const runnerMarker = document.getElementById('runnerMarker');
            
            // Clear previous
            routeLines.innerHTML = '';
            routeCities.innerHTML = '';
            
            // Draw route lines between cities
            for (let i = 0; i < ersteRoute.length - 1; i++) {
                const from = ersteRoute[i];
                const to = ersteRoute[i + 1];
                
                let strokeColor = '#D1D5DB'; // Gray forÊú™ÂÆåÊàê
                let strokeWidth = 4;
                let strokeDasharray = '10,5';
                
                if (i < currentCityIndex) {
                    strokeColor = '#10B981'; // Green for completed
                    strokeWidth = 6;
                    strokeDasharray = '0';
                } else if (i === currentCityIndex) {
                    strokeColor = '#F59E0B'; // Orange for current
                    strokeWidth = 6;
                    strokeDasharray = '10,5';
                }
                
                routeLines.innerHTML += `
                    <line x1="${from.x}" y1="${from.y}" x2="${to.x}" y2="${to.y}" 
                          stroke="${strokeColor}" 
                          stroke-width="${strokeWidth}"
                          stroke-dasharray="${strokeDasharray}"
                          stroke-linecap="round"/>
                `;
            }
            
            // Draw cities as points
            ersteRoute.forEach((city, index) => {
                let fillColor = '#9CA3AF'; // Gray for locked
                let pulseAnimation = '';
                
                if (currentKm >= city.km) {
                    fillColor = '#10B981'; // Green for completed
                } else if (index === currentCityIndex + 1) {
                    fillColor = '#F59E0B'; // Orange for current target
                    pulseAnimation = `
                        <animate attributeName="r" values="18;22;18" dur="2s" repeatCount="indefinite"/>
                        <animate attributeName="opacity" values="1;0.6;1" dur="2s" repeatCount="indefinite"/>
                    `;
                }
                
                routeCities.innerHTML += `
                    <g class="map-city">
                        <circle cx="${city.x}" cy="${city.y}" r="18" 
                                fill="${fillColor}" 
                                stroke="white" 
                                stroke-width="4">
                            ${pulseAnimation}
                        </circle>
                        <text x="${city.x}" y="${city.y - 30}" 
                              text-anchor="middle" 
                              font-size="16" 
                              font-weight="bold" 
                              fill="#1F2937"
                              style="text-shadow: 2px 2px 4px white, -1px -1px 2px white;">
                            ${city.flag} ${city.city}
                        </text>
                        ${currentKm >= city.km ? `<text x="${city.x}" y="${city.y + 6}" text-anchor="middle" font-size="18">‚úì</text>` : ''}
                    </g>
                `;
            });
            
            // Position runner marker on the route
            if (currentKm > 0 && currentKm < totalRouteKm && currentCityIndex < ersteRoute.length - 1) {
                const from = ersteRoute[currentCityIndex];
                const to = ersteRoute[currentCityIndex + 1];
                const segmentProgress = (currentKm - from.km) / (to.km - from.km);
                
                const runnerX = from.x + (to.x - from.x) * segmentProgress;
                const runnerY = from.y + (to.y - from.y) * segmentProgress;
                
                runnerMarker.setAttribute('transform', `translate(${runnerX}, ${runnerY})`);
                runnerMarker.style.display = 'block';
            } else if (currentKm >= totalRouteKm) {
                const finalCity = ersteRoute[ersteRoute.length - 1];
                runnerMarker.setAttribute('transform', `translate(${finalCity.x}, ${finalCity.y})`);
                runnerMarker.style.display = 'block';
            } else {
                runnerMarker.style.display = 'none';
            }
        }
        
        function updateCharityProjects() {
            const container = document.getElementById('charityProjects');
            const projectAllocations = [data.project1, data.project2, data.project3];
            
            container.innerHTML = charityProjects.map((project, index) => {
                const allocated = projectAllocations[index];
                const progress = (allocated / project.target) * 100;
                const isCompleted = progress >= 100;
                
                return `
                    <div class="charity-project">
                        <div class="project-title">${project.name}</div>
                        <div class="project-amount">${allocated}‚Ç¨ z ${project.target}‚Ç¨</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${Math.min(progress, 100)}%"></div>
                        </div>
                        <p style="font-size: 0.9em; opacity: 0.9; margin-top: 10px;">${project.description}</p>
                        <span class="status-badge ${isCompleted ? 'completed' : 'in-progress'}">
                            ${isCompleted ? '‚úÖ DOKONƒåEN√â' : `${Math.round(progress)}% dokonƒçen√©`}
                        </span>
                    </div>
                `;
            }).join('');
        }
        
        // Anim√°cia ƒç√≠sel pri naƒç√≠tan√≠
        function animateNumber(elementId, finalValue) {
            const element = document.getElementById(elementId);
            const duration = 2000;
            const steps = 60;
            const stepValue = finalValue / steps;
            let currentValue = 0;
            
            const interval = setInterval(() => {
                currentValue += stepValue;
                if (currentValue >= finalValue) {
                    currentValue = finalValue;
                    clearInterval(interval);
                }
                
                if (elementId === 'totalKm') {
                    element.textContent = currentValue.toFixed(1);
                } else if (elementId === 'totalEuro') {
                    element.textContent = Math.floor(currentValue) + '‚Ç¨';
                } else {
                    element.textContent = Math.floor(currentValue);
                }
            }, duration / steps);
        }
        
        // Spustenie anim√°cie po naƒç√≠tan√≠
        setTimeout(() => {
            if (data.runners > 0) {
                animateNumber('totalRunners', data.runners);
                animateNumber('totalKm', data.kilometers);
                animateNumber('totalEuro', Math.floor(data.kilometers));
                animateNumber('projectsCompleted', 
                    [data.project1, data.project2, data.project3].filter((amount, index) => 
                        amount >= charityProjects[index].target
                    ).length
                );
            }
        }, 500);
    </script>
</body>
</html>