<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SLSP Run & Rise</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #8B5CF6 0%, #6366F1 50%, #3B82F6 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 25px;
            padding: 50px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.2);
        }
        
        .header { text-align: center; margin-bottom: 50px; }
        
        .main-title {
            font-size: 3em;
            font-weight: 800;
            background: linear-gradient(135deg, #8B5CF6, #3B82F6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 15px;
        }
        
        .subtitle {
            font-size: 1.3em;
            color: #7C3AED;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: 2px;
        }
        
        .slogan { font-size: 1.1em; color: #3B82F6; font-style: italic; margin-bottom: 8px; }
        .attribution { font-size: 0.95em; color: #8B5CF6; font-weight: 500; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 60px;
        }
        
        .stat-card {
            padding: 45px 35px;
            border-radius: 20px;
            text-align: center;
            color: white;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(45deg);
            transition: 0.6s;
        }
        
        .stat-card:hover::before { right: -60%; }
        .stat-card:hover { transform: translateY(-10px) scale(1.02); box-shadow: 0 20px 45px rgba(0,0,0,0.25); }
        
        .stat-card.start { background: linear-gradient(135deg, #10B981, #059669); }
        .stat-card.love { background: linear-gradient(135deg, #EC4899, #DB2777); }
        .stat-card.countdown { background: linear-gradient(135deg, #F59E0B, #EA580C); }
        
        .stat-icon-wrapper {
            width: 80px;
            height: 80px;
            margin: 0 auto 20px;
            background: rgba(255,255,255,0.2);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5em;
        }
        
        .stat-number { font-size: 3.5em; font-weight: 900; margin-bottom: 10px; text-shadow: 0 3px 6px rgba(0,0,0,0.2); }
        .stat-label { font-size: 1.3em; font-weight: 700; margin-bottom: 8px; letter-spacing: 1px; }
        .stat-subtitle { opacity: 0.9; font-size: 1em; }
        .countdown-event { font-size: 0.95em; font-weight: 600; margin-top: 8px; opacity: 0.95; }
        
        .route-section { background: #F9FAFB; padding: 45px; border-radius: 25px; margin-bottom: 50px; }
        
        .route-title {
            text-align: center;
            font-size: 2.2em;
            font-weight: 800;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #8B5CF6, #3B82F6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .route-subtitle { text-align: center; color: #64748B; margin-bottom: 40px; font-size: 1.15em; font-weight: 500; }
        
        .route-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin: 35px 0; }
        
        .route-stat {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .route-stat-number { font-size: 2.2em; font-weight: 800; color: #8B5CF6; }
        .route-stat-label { color: #64748B; font-size: 0.95em; margin-top: 8px; font-weight: 600; }
        
        .current-location {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border: 3px solid #F59E0B;
            padding: 25px;
            border-radius: 18px;
            margin: 35px 0;
            text-align: center;
        }
        
        .current-location-title { font-size: 1.4em; font-weight: 800; color: #92400E; margin-bottom: 12px; }
        .current-location-text { color: #78350F; font-size: 1.15em; font-weight: 600; }
        
        .next-checkpoint {
            background: linear-gradient(135deg, #EDE9FE, #DDD6FE);
            border: 3px solid #8B5CF6;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .next-checkpoint-title { font-weight: 700; color: #6B21A8; margin-bottom: 8px; font-size: 1.05em; }
        .next-checkpoint-km { color: #7C3AED; font-size: 1.35em; font-weight: 800; }
        
        .map-container {
            position: relative;
            background: white;
            padding: 35px;
            border-radius: 20px;
            margin: 35px 0;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }
        
        .map-image { width: 100%; height: auto; border-radius: 15px; display: block; }
        .map-overlay { position: absolute; top: 35px; left: 35px; right: 35px; bottom: 35px; pointer-events: none; }
        
        .city-marker {
            position: absolute;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            cursor: pointer;
            pointer-events: all;
            transition: all 0.3s ease;
            border: 4px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .city-marker:hover { transform: scale(1.4); z-index: 10; }
        .city-marker.completed { background: #10B981; }
        .city-marker.current { background: #F59E0B; animation: pulse 2s infinite; }
        .city-marker.locked { background: #94A3B8; }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
            50% { transform: scale(1.2); box-shadow: 0 8px 25px rgba(245, 158, 11, 0.6); }
        }
        
        .cities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }
        
        .city-card {
            background: white;
            padding: 25px;
            border-radius: 18px;
            text-align: center;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .city-card:hover { transform: translateY(-8px); box-shadow: 0 12px 28px rgba(0,0,0,0.15); }
        .city-card.completed { background: linear-gradient(135deg, #10B981, #059669); color: white; border-color: #10B981; }
        .city-card.current { background: linear-gradient(135deg, #F59E0B, #EA580C); color: white; border-color: #F59E0B; animation: cardPulse 2.5s infinite; }
        
        @keyframes cardPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .city-card.locked { opacity: 0.45; }
        .city-flag { font-size: 3em; margin-bottom: 12px; }
        .city-name { font-weight: 800; font-size: 1.15em; margin-bottom: 8px; }
        .city-distance { font-size: 0.9em; opacity: 0.85; font-weight: 600; }
        .city-status { margin-top: 12px; font-size: 1.4em; }
        
        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 999;
            display: none;
        }
        
        .popup-overlay.show { display: block; }
        
        .city-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 35px;
            border-radius: 20px;
            box-shadow: 0 25px 60px rgba(0,0,0,0.4);
            max-width: 450px;
            z-index: 1000;
            display: none;
            border: 4px solid #8B5CF6;
        }
        
        .city-popup.show { display: block; }
        
        .popup-close {
            position: absolute;
            top: 18px;
            right: 22px;
            font-size: 28px;
            cursor: pointer;
            color: #64748B;
            transition: 0.3s;
        }
        
        .popup-close:hover { color: #1F2937; transform: rotate(90deg); }
        .popup-title { font-size: 1.6em; font-weight: 800; margin-bottom: 20px; color: #1F2937; }
        .popup-section { margin-bottom: 18px; }
        .popup-label { font-weight: 700; color: #8B5CF6; font-size: 0.95em; margin-bottom: 8px; }
        .popup-text { color: #475569; font-size: 1em; line-height: 1.7; }
        
        .admin-panel {
            background: #F8FAFC;
            padding: 30px;
            border-radius: 18px;
            margin-top: 40px;
            border: 2px dashed #CBD5E1;
        }
        
        .admin-toggle {
            background: #64748B;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            transition: 0.3s;
        }
        
        .admin-toggle:hover { background: #475569; transform: translateY(-2px); }
        
        .admin-login, .admin-form { display: none; margin-top: 25px; }
        .admin-login.active, .admin-form.active {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            align-items: end;
        }
        
        .form-group { display: flex; flex-direction: column; }
        .form-group label { margin-bottom: 8px; font-weight: 700; color: #475569; font-size: 0.95em; }
        .form-group input {
            padding: 12px 15px;
            border: 2px solid #E2E8F0;
            border-radius: 10px;
            font-size: 1em;
            transition: 0.3s;
        }
        
        .form-group input:focus { outline: none; border-color: #8B5CF6; }
        
        .login-btn, .update-btn {
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            font-size: 1em;
            border: none;
            color: white;
            transition: 0.3s;
        }
        
        .login-btn { background: #8B5CF6; }
        .login-btn:hover { background: #7C3AED; transform: translateY(-2px); }
        .update-btn { background: #10B981; }
        .update-btn:hover { background: #059669; transform: translateY(-2px); }
        
        .error-message { color: #DC2626; margin-top: 12px; font-size: 0.95em; font-weight: 600; }
        .last-updated { text-align: center; color: #64748B; font-size: 0.95em; margin-top: 25px; font-style: italic; }
        
        @media (max-width: 768px) {
            .container { padding: 30px 20px; }
            .main-title { font-size: 2.2em; }
            .stats-grid, .route-stats, .cities-grid { grid-template-columns: 1fr; }
            .stat-card { padding: 35px 25px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="main-title">SLSP Run & Rise</h1>
            <p class="subtitle">START ¬∑ LOVE ¬∑ SUPPORT ¬∑ PURPOSE</p>
            <p class="slogan">"Zaƒçni s nami a be≈æ za bud√∫cnos≈•"</p>
            <p class="attribution">Iniciat√≠va Women's Voices</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card start">
                <div class="stat-icon-wrapper">üë≠</div>
                <div class="stat-number" id="totalRunners">0</div>
                <div class="stat-label">START</div>
                <div class="stat-subtitle">Akt√≠vnych be≈æk√Ω≈à</div>
            </div>
            
            <div class="stat-card love">
                <div class="stat-icon-wrapper">‚ù§Ô∏è</div>
                <div class="stat-number" id="totalKm">0</div>
                <div class="stat-label">LOVE</div>
                <div class="stat-subtitle">Nabehan√© kilometre</div>
            </div>
            
            <div class="stat-card countdown">
                <div class="stat-icon-wrapper">‚è≥</div>
                <div class="stat-number" id="countdownDays">0</div>
                <div class="stat-label">DN√ç</div>
                <div class="stat-subtitle">do behu</div>
                <div class="countdown-event">Od Tatier k Dunaju<br>15. augusta 2026</div>
            </div>
        </div>
        
        <div class="route-section">
            <h2 class="route-title">üó∫Ô∏è Erste Group Journey</h2>
            <p class="route-subtitle">Bratislava ‚Üí Budape≈°≈• ‚Üí Bukure≈°≈• ‚Üí Belehrad ‚Üí Z√°hreb ‚Üí Viede≈à ‚Üí Praha ‚Üí Krakov ‚Üí Ko≈°ice ‚Üí Bratislava</p>
            
            <div class="route-stats">
                <div class="route-stat">
                    <div class="route-stat-number" id="routeKm">0 km</div>
                    <div class="route-stat-label">Nabehan√© km</div>
                </div>
                <div class="route-stat">
                    <div class="route-stat-number" id="routePercent">0%</div>
                    <div class="route-stat-label">Cesty dokonƒçen√©</div>
                </div>
                <div class="route-stat">
                    <div class="route-stat-number" id="routeCities">0/9</div>
                    <div class="route-stat-label">Nav≈°t√≠ven√© mest√°</div>
                </div>
            </div>
            
            <div class="current-location">
                <div class="current-location-title">üìç Aktu√°lna poz√≠cia</div>
                <div class="current-location-text" id="currentLocationText">≈†tart v Bratislave</div>
                
                <div class="next-checkpoint" id="nextCheckpoint">
                    <div class="next-checkpoint-title">ƒéal≈°√≠ checkpoint:</div>
                    <div class="next-checkpoint-km" id="nextCheckpointText">Budape≈°≈• - 184 km</div>
                </div>
            </div>
            
            <div class="map-container">
                <img src="map.png" alt="Erste Route Map" class="map-image">
                <div class="map-overlay" id="mapOverlay"></div>
            </div>
            
            <div class="cities-grid" id="citiesGrid"></div>
        </div>
        
        <div class="admin-panel">
            <button class="admin-toggle" onclick="toggleAdmin()">‚öôÔ∏è Aktualizova≈• √∫daje</button>
            
            <div class="admin-login" id="adminLogin">
                <div class="form-group">
                    <label>Heslo:</label>
                    <input type="password" id="adminPassword" placeholder="Zadaj heslo">
                </div>
                <div class="form-group">
                    <button class="login-btn" onclick="checkPassword()">Prihl√°si≈•</button>
                </div>
                <div class="error-message" id="errorMessage"></div>
            </div>
            
            <div class="admin-form" id="adminForm">
                <div class="form-group">
                    <label>Poƒçet be≈æk√Ω≈à</label>
                    <input type="number" id="inputRunners" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>Celkov√© km</label>
                    <input type="number" id="inputKm" step="0.1" min="0" value="0">
                </div>
                <div class="form-group">
                    <button class="update-btn" onclick="updateData()">Aktualizova≈•</button>
                </div>
            </div>
        </div>
        
        <div class="last-updated" id="lastUpdated">Posledn√° aktualiz√°cia: Nikdy</div>
    </div>
    
    <div class="popup-overlay" id="popupOverlay" onclick="closePopup()"></div>
    
    <div class="city-popup" id="cityPopup">
        <span class="popup-close" onclick="closePopup()">√ó</span>
        <div id="popupContent"></div>
    </div>

    <script>
        const ADMIN_PASSWORD = 'slsprun_2026';
        let isAuthenticated = false;
        
        const ersteRoute = [
            { city: "Bratislava", country: "Slovensko", flag: "üá∏üá∞", km: 0, mapX: 30, mapY: 38, runFact: "Bratislavsk√Ω marat√≥n je najstar≈°√≠ na Slovensku (od 2006)", ersteFact: "Slovensk√° sporiteƒæ≈àa je s√∫ƒças≈•ou Erste Group od roku 2001" },
            { city: "Budape≈°≈•", country: "Maƒèarsko", flag: "üá≠üá∫", km: 184, mapX: 38, mapY: 50, runFact: "Budape≈°tianksy marat√≥n vedie popri Dunaji s v√Ωhƒæadom na parlament", ersteFact: "Erste Bank p√¥sob√≠ v krajine od roku 1997" },
            { city: "Bukure≈°≈•", country: "Rumunsko", flag: "üá∑üá¥", km: 951, mapX: 88, mapY: 92, runFact: "Bukure≈°≈•sk√Ω polmarat√≥n je jeden z najr√Ωchlej≈°ie rast√∫cich behov v regi√≥ne", ersteFact: "Banca ComercialƒÉ Rom√¢nƒÉ je najv√§ƒç≈°ia banka v Rumunsku" },
            { city: "Belehrad", country: "Srbsko", flag: "üá∑üá∏", km: 1528, mapX: 50, mapY: 84, runFact: "Belehradsk√Ω marat√≥n prech√°dza cez historick√© pevnosti", ersteFact: "Erste Bank podporuje digit√°lne bankovn√≠ctvo od roku 2005" },
            { city: "Z√°hreb", country: "Chorv√°tsko", flag: "üá≠üá∑", km: 1951, mapX: 18, mapY: 72, runFact: "Z√°hrebsk√Ω marat√≥n vedie cez malebn√© parky a historick√© centrum", ersteFact: "Erste&Steierm√§rkische Bank p√¥sob√≠ v Chorv√°tsku od roku 2003" },
            { city: "Viede≈à", country: "Rak√∫sko", flag: "üá¶üáπ", km: 2266, mapX: 22, mapY: 38, runFact: "Viedensk√Ω mestsk√Ω marat√≥n je jeden z najr√Ωchlej≈°√≠ch v Eur√≥pe", ersteFact: "Erste Group m√° s√≠dlo vo Viedni a p√¥sob√≠ od roku 1819" },
            { city: "Praha", country: "ƒåesko", flag: "üá®üáø", km: 2553, mapX: 8, mapY: 10, runFact: "Pra≈æsk√Ω marat√≥n je pova≈æovan√Ω za jeden z najkraj≈°√≠ch v Eur√≥pe", ersteFact: "ƒåesk√° spo≈ôitelna je l√≠drom digit√°lneho bankovn√≠ctva" },
            { city: "Krakov", country: "Poƒæsko", flag: "üáµüá±", km: 3005, mapX: 28, mapY: 8, runFact: "Krakovsk√Ω marat√≥n prech√°dza historick√Ωm centrom s v√Ωhƒæadom na hrad Wawel", ersteFact: "Erste Group expanduje v strednej Eur√≥pe" },
            { city: "Ko≈°ice", country: "Slovensko", flag: "üá∏üá∞", km: 3223, mapX: 58, mapY: 32, runFact: "Ko≈°ick√Ω Medzin√°rodn√Ω marat√≥n mieru je najstar≈°√≠ v Eur√≥pe (od 1924)", ersteFact: "V√Ωchodoslovensk√° poboƒçkov√° s√≠≈• patr√≠ medzi najsilnej≈°ie" },
            { city: "Bratislava", country: "Slovensko", flag: "üá∏üá∞", km: 3603, mapX: 30, mapY: 38, runFact: "Dokonƒçili sme okruh! üéâ Brav√≥!", ersteFact: "Sp√§≈• v centr√°le Slovenskej sporiteƒæne" }
        ];
        
        const totalRouteKm = 3603;
        const raceDate = new Date('2026-08-15T00:00:00');
        let data = JSON.parse(localStorage.getItem('slspRunRiseData') || '{"runners":0,"kilometers":0,"lastUpdated":null}');
        
        document.addEventListener('DOMContentLoaded', () => { 
            updateDisplay();
            loadFormData();
            updateCountdown();
            setInterval(updateCountdown, 60000);
        });
        
        function updateCountdown() {
            const now = new Date();
            const diff = raceDate - now;
            const days = Math.ceil(diff / (1000 * 60 * 60 * 24));
            document.getElementById('countdownDays').textContent = days > 0 ? days : 0;
        }
        
        function toggleAdmin() {
            const login = document.getElementById('adminLogin');
            const form = document.getElementById('adminForm');
            if (isAuthenticated) {
                form.classList.toggle('active');
                login.classList.remove('active');
            } else {
                login.classList.toggle('active');
                form.classList.remove('active');
            }
        }
        
        function checkPassword() {
            const password = document.getElementById('adminPassword').value;
            const errorMsg = document.getElementById('errorMessage');
            if (password === ADMIN_PASSWORD) {
                isAuthenticated = true;
                document.getElementById('adminLogin').classList.remove('active');
                document.getElementById('adminForm').classList.add('active');
                document.getElementById('adminPassword').value = '';
                errorMsg.textContent = '';
            } else {
                errorMsg.textContent = '‚ùå Nespr√°vne heslo!';
                setTimeout(() => errorMsg.textContent = '', 3000);
            }
        }
        
        function loadFormData() {
            document.getElementById('inputRunners').value = data.runners;
            document.getElementById('inputKm').value = data.kilometers;
        }
        
        function updateData() {
            data.runners = parseInt(document.getElementById('inputRunners').value) || 0;
            data.kilometers = parseFloat(document.getElementById('inputKm').value) || 0;
            data.lastUpdated = new Date().toISOString();
            localStorage.setItem('slspRunRiseData', JSON.stringify(data));
            updateDisplay();
            document.getElementById('adminForm').classList.remove('active');
            alert('‚úÖ √ödaje boli √∫spe≈°ne aktualizovan√©!');
        }
        
        function updateDisplay() {
            document.getElementById('totalRunners').textContent = data.runners;
            document.getElementById('totalKm').textContent = data.kilometers.toFixed(1);
            updateErsteRoute();
            if (data.lastUpdated) {
                const date = new Date(data.lastUpdated);
                document.getElementById('lastUpdated').textContent = `Posledn√° aktualiz√°cia: ${date.toLocaleDateString('sk-SK')} o ${date.toLocaleTimeString('sk-SK')}`;
            }
        }
        
        function updateErsteRoute() {
            const currentKm = data.kilometers;
            const progressPercent = Math.min((currentKm / totalRouteKm) * 100, 100);
            document.getElementById('routeKm').textContent = currentKm.toFixed(1) + ' km';
            document.getElementById('routePercent').textContent = progressPercent.toFixed(1) + '%';
            
            let currentCityIndex = 0, visitedCities = 0;
            for (let i = 0; i < ersteRoute.length; i++) {
                if (currentKm >= ersteRoute[i].km) {
                    currentCityIndex = i;
                    visitedCities = i < ersteRoute.length - 1 ? i + 1 : 9;
                }
            }
            document.getElementById('routeCities').textContent = Math.min(visitedCities, 9) + '/9';
            updateMapMarkers(currentKm, currentCityIndex);
            
            const currentCity = ersteRoute[currentCityIndex];
            const nextCity = ersteRoute[currentCityIndex + 1];
            if (currentKm >= totalRouteKm) {
                document.getElementById('currentLocationText').textContent = 'üéâ Okruh dokonƒçen√Ω! Gratulujeme!';
                document.getElementById('nextCheckpoint').style.display = 'none';
            } else if (nextCity) {
                const kmToNext = nextCity.km - currentKm;
                document.getElementById('currentLocationText').textContent = `Na ceste medzi ${currentCity.city} a ${nextCity.city}`;
                document.getElementById('nextCheckpointText').textContent = `${nextCity.city} - e≈°te ${kmToNext.toFixed(1)} km`;
            }
            
            const citiesGrid = document.getElementById('citiesGrid');
            citiesGrid.innerHTML = ersteRoute.slice(0, -1).map((city, index) => {
                let status = 'locked', statusIcon = 'üîí';
                if (currentKm >= city.km) { status = 'completed'; statusIcon = '‚úÖ'; }
                else {
                    const nextTarget = ersteRoute.find(c => c.km > currentKm);
                    if (nextTarget && nextTarget.city === city.city && nextTarget.km === city.km) {
                        status = 'current'; statusIcon = 'üéØ';
                    }
                }
                return `<div class="city-card ${status}" onclick="showCityInfo(${index})">
                    <div class="city-flag">${city.flag}</div>
                    <div class="city-name">${city.city}</div>
                    <div class="city-distance">${city.km} km</div>
                    <div class="city-status">${statusIcon}</div>
                </div>`;
            }).join('');
        }
        
        function updateMapMarkers(currentKm, currentCityIndex) {
            const overlay = document.getElementById('mapOverlay');
            overlay.innerHTML = '';
            ersteRoute.slice(0, -1).forEach((city, index) => {
                let markerClass = 'locked';
                if (currentKm >= city.km) markerClass = 'completed';
                else if (index === currentCityIndex + 1) markerClass = 'current';
                
                const marker = document.createElement('div');
                marker.className = `city-marker ${markerClass}`;
                marker.style.left = city.mapX + '%';
                marker.style.top = city.mapY + '%';
                marker.innerHTML = city.flag;
                marker.onclick = () => showCityInfo(index);
                overlay.appendChild(marker);
            });
        }
        
        function showCityInfo(index) {
            const city = ersteRoute[index];
            document.getElementById('popupContent').innerHTML = `
                <div class="popup-title">${city.flag} ${city.city}, ${city.country}</div>
                <div class="popup-section">
                    <div class="popup-label">üèÉ‚Äç‚ôÄÔ∏è Be≈æeck√Ω fakt:</div>
                    <div class="popup-text">${city.runFact}</div>
                </div>
                <div class="popup-section">
                    <div class="popup-label">üè¶ Erste Bank fakt:</div>
                    <div class="popup-text">${city.ersteFact}</div>
                </div>
                <div class="popup-section">
                    <div class="popup-label">üìç Vzdialenos≈• od ≈°tartu:</div>
                    <div class="popup-text">${city.km} km</div>
                </div>
            `;
            document.getElementById('cityPopup').classList.add('show');
            document.getElementById('popupOverlay').classList.add('show');
        }
        
        function closePopup() {
            document.getElementById('cityPopup').classList.remove('show');
            document.getElementById('popupOverlay').classList.remove('show');
        }
        
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.getElementById('adminLogin').classList.contains('active')) {
                checkPassword();
            }
        });
    </script>
</body>
</html>
